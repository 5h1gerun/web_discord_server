{% extends "mobile/base_phone.html" %}
{% block title %}ログイン | WDS Phone{% endblock %}

{% block content %}
<h2 class="h5 text-center mb-3">Sign In</h2>
<form method="post">
  <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <div class="mb-2">
      <input name="username" class="form-control" placeholder="Username" required>
    </div>
    <div class="mb-2">
      <input type="password" name="password" class="form-control" placeholder="Password" required>
    </div>
    <p class="small">
      アカウントをお持ちでない方は
      <a href="https://discord.gg/yurfYA5aQ8" target="_blank" class="fw-medium text-decoration-underline">Discordに参加</a>してください。
    </p>
    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
  <button type="submit" class="btn btn-primary w-100">Sign In</button>
</form>
<a href="/discord_login" class="btn btn-secondary w-100 mt-2">
  <i class="bi bi-discord me-2"></i>Discordでログイン
</a>
{% endblock %}

{% block extra_js %}
<script>
  setInterval(refreshCsrfToken, 60000);
  document.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'visible') {
      refreshCsrfToken();
    }
  });
</script>
{% endblock %}
